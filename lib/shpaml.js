var SHPAML=function(){function f(a,c){c.regex=a;return c}function k(a){return a.replace(/^\s+|\s+$/g,"")}function g(a){return a.replace(/\s+$/,"")}function x(a){return a.replace(y,function(a,b,d){return'"'===d[0]||"'"===d[0]?b+d:b+'"'+d+'"'})}function z(a,c,b){var d,e;d=c[0];e=d[0];d=d[1];p.regex.exec(d)?(a.push(e+d),b(c.slice(1))):A.exec(d)||(d=q(d),a.push(e+d[0]),b(c.slice(1)),a.push(e+d[1]))}function r(a){var c,b,d,e,a=n(k(a));d=a[0];a=a[1];for(b=0;b<s.length;b++)if(e=s[b],c=e.regex.exec(a))return d+
e(c);return""}function q(a){B.exec(a)&&(a="div"+a);a=t(a);return["<"+a[0]+">","</"+a[1]+">"]}function t(a){var c,b,d,e;b=C.exec(a);d=b[1];a=b[2];b=b[3];c=(e=D.exec(d))?[i(e[1]),e[2]]:[i(d),null];d=c[0];c=E(c[1]);e=c[0];c=c[1];b=x(b);c&&(b+=' class="'+c+'"');e&&(b+=' id="'+e+'"');return[d+a+b,d]}function E(a){if(!a)return["",""];var c=[],b=[];a.replace(F,function(a,e,f){"#"===e?c.push(f):b.push(f)});return[i(c.join(" ")),i(b.join(" "))]}function i(a){a=new String(a);return a.replace(/\.\./g,".")}function u(a,
c){var b=q(a);return b[0]+c+b[1]}function n(a){return v(v.regex.exec(a))}function G(a){var c,b,d,e;c=a[0];d=c[0];for(b=1;b<a.length;){c=a[b];e=c[0];if((c=c[1])&&e.length<=d.length)break;b+=1}for(;1<b&&""===k(a[b-1][1]);)b-=1;return b}function w(a,c,b,d,e,f,i,o){var m=[];o||(o=G);a=g(a);a=a.split("\n");H(a,m,c,b,d,e,f,i,o);return a=m.join("\n")+"\n"}function H(a,c,b,d,e,f,i,g,m){function k(a){for(var g,h,j;a.length;)h=a[0],g=h[0],h=h[1],""===h?(a.shift(),c.push("")):(j=m(a),1===j?(a.shift(),h!==e&&
(0===h.indexOf(f)?(j=h.substring(f.length),c.push(j)):0===h.indexOf(i)?c.push(""):(j=g+d(h),c.push(j)))):(g=a.slice(0,j),a=a.slice(j),b(c,g,k)))}var l;for(l=0;l<a.length;l++)a[l]=g(a[l]);k(a)}var C=/(\S+)([ \t]*)(.*)/,F=/([.#])((?:[^ \t\.#]|\.\.)+)/g,D=/((?:[^ \t\.#]|\.\.)+)(.*)/,B=/^(?:#|(?:\.(?!\.)))/,A=/^::comment$/,v=f(/^([ \t]*)(.*)/,function(a){var c;c=a[1];a=a[2];a=g(a);""===a&&(c="");return[c,a]}),p=f(/^([<{]\S.*)/,function(a){return g(a[1])}),I=f(/^\| (.*)/,function(a){return g(a[1])}),J=
f(/(.*?) > (.*)/,function(a){return u(a[1],r(a[2]))}),K=f(/(.*?) \| (.*)/,function(a){return u(a[1],a[2])}),L=f(/^> (.*)/,function(a){return"<"+t(k(a[1]))[0]+" />"}),M=f(/^(.*)/,function(a){return g(a[1])}),s=[p,I,J,K,L,M],y=RegExp("((?:^|[ \\t]+)[^ \\t=]+=)((?:(?:'(?:\\\\'|[^'])*')|(?:\"(?:\\\\\"|[^\"])*\"))|[^ \\t]+)","g");return{convert_text:function(a){return w(a,z,r,"PASS","|| ","||",n)},indent:w,find_indentation:n,PASS_SYNTAX:"PASS",FLUSH_LEFT_SYNTAX:"|| ",FLUSH_LEFT_EMPTY_LINE:"||",version:"0.99b"}}();
"undefined"!==typeof exports&&(exports.SHPAML=SHPAML);
